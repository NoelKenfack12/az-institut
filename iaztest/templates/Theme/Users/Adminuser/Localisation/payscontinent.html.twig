{% extends "Theme/Users/Adminuser/layoutadmin.html.twig" %}

{% block meta %}
	{{ parent() }}
	<meta name="keywords" content="{{ site }}, Business, Innovation, Administration"/>
	<meta name="author" content="Noel Kenfack"/>
	<meta name="description" content="{{ site }} | Inscription | Cameroun | {{ metier }}"/>
{% endblock %}

{% block title %}
{{ parent() }} | {{ 'Accueil Admin'|trans }}
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block userblog_menuleft %}
	{{ render(controller("App\\Controller\\Users\\Adminuser\\AccueilController:menuadmin")) }}
{% endblock %}

{% block userblog_body %}

<div id="content">
	<div class="container">
	{% include 'Theme/General/Template/Menu/descriptionvariable.html.twig' %}
	<!--breadcrumbs start-->
<div class="inner-content">

<div class="col s12 m12 l6">
 <!--Borderless Table-->
 <div class="section" style="padding: 5px 0px 0px 0px;">
 <div class="row" style="margin: -15px -20px 0px -20px; background: #fafafa;">
  <div class="col s12 m12 l12">
	<h5 class="breadcrumbs-title">
	{{ 'Vous êtes ici'|trans }}:
	</h5>
	<ol class="breadcrumb">
	  <li><a href="{{ path('users_adminuser_accueil_administration') }}">{{ 'Administration'|trans }}</a>
	  </li>
	  <li class="active">{{ 'Localisation'|trans }}</li>
	  <li class="active">{{ 'Pays et continents'|trans }}</li>
	</ol>
  </div>
</div>
<div class="divider" style="border-top: 2px dashed #999;"></div>
<!--DataTables example-->

<!--DataTables 
<!-- Form with placeholder -->
<h5 class="breadcrumbs-title">{{ 'Liste des continents'|trans }} <a href="#!" class="open-modal-continent btn-floating btn-large waves-effect waves-light right bg-struct"><i class="mdi-content-add"></i></a></h5>
<hr>
{% for infos in app.session.flashbag.get('information') %}
{% if loop.first %}
	{% include 'Theme/General/Template/Menu/flasinfos.html.twig' %}
{% endif %}
{% endfor %}

{% set id = '' %}
{% for infos in app.session.flashbag.get('supprime_continent') %}
{% if loop.last %}
<div style="background: #f2f2f2; padding: 5px; border-left: 4px solid #3565ae;">
<strong style="color: red;"><span class="fa fa-warning"></span> {{ 'Êtes vous certain de vouloir supprimer le continent'|trans }} {{ infos|trans|lower|raw }} </strong>
<form action="{{ path('users_adminuser_localisation_supprimer_continent',{'id': id }) }}" method="post" style="display: inline;">
<input type="submit" value="{{ 'Supprimer'|trans }}" style="background: red;"/>
{{ form_rest(formsupp) }}
</form>
</div>
{% else %}
{% set id = infos %}
{% endif %}
{% endfor %}

{% set id = '' %}
{% for infos in app.session.flashbag.get('pays_supp') %}
{% if loop.last %}
<div style="background: #f2f2f2; padding: 5px; border-left: 4px solid #3565ae;">
<strong style="color: red;"><span class="fa fa-warning"></span> {{ 'Êtes vous certain de vouloir supprimer le pays '|trans }} <i class="mdi-hardware-keyboard-arrow-right" style="font-size: 12px;"></i> {{ infos|trans|lower|raw }} </strong>
<form action="{{ path('users_adminuser_drop_country_user_local',{'id': id }) }}" method="post" style="display: inline;">
<input type="submit" value="{{ 'Supprimer'|trans }}" style="background: red;"/>
{{ form_rest(formsupp) }}
</form>
</div>
{% else %}
{% set id = infos %}
{% endif %}
{% endfor %}			 


<!--DataTables example Row grouping-->
<div class="row" style="margin-top: 20px;">
{% for continent in liste_continent %}
<div class="col s12 m4 12">
<div style="display:block;">
<ul id="dropdown-type-{{ continent.id }}" class="dropdown-content right"style="min-width: 150px!important;">
	<li><a href="#!" class="-text open-modal-update-continent" value="{{ continent.id }}"><i class="mdi-image-edit" style="font-size: 15px;"></i> {{ 'Modifier'|trans }}</a> </li>
	<li><a href="{{ path('users_adminuser_localisation_supprimer_continent', {'id': continent.id }) }}" class="-text"><i class="mdi-content-clear" style="font-size: 15px;"></i> {{ 'Supprimer'|trans }}</a></li>
</ul>
<a class="dropdown-button waves-effect waves-light" href="#!" data-activates="dropdown-type-{{ continent.id }}" style="float:right; margin-top: 15px;"><i class="mdi-hardware-keyboard-control"></i></a>
</div>
<ul class="collection" style="overflow: visible;">
  <a href="#!" class="collection-item" style="padding: 5px;">
	<div style="height: 150px;">
	<div style="color: rgba(0, 0, 0, 0.87); font-size: 18px;"><strong><i class="mdi-image-adjust" style="font-size: 16px;" title="Plus prioritaire"></i> {{ continent.nom|trans }}</strong></div>
	<div><img src="{% if continent.src != 'source' %}{{ asset(continent.getwebpath) }}{% else %}{{ asset('templateopme/images/user-bg-simple.jpg') }}{% endif %}" alt="" style="width: 100%; height: 120px;"></div>
	</div>
	<div style="background: #f2f2f2; height: 50px; border-top: 5px solid #3565ae;">
	<div style="color: rgba(0, 0, 0, 0.87); margin-top: 10px;">{{ 'Citoyen'|trans }}: {{ continent.citoyen|trans }}, {{ 'Citoyenne'|trans }}: {{ continent.citoyenne|trans }}</div>
	<div style="display:block; bottom: 20px; position: absolute; right: -20px;"><span class="badge" title="{{ 'Nombre de pays'|trans }}"><i class="mdi-action-settings-input-component" style="font-size: 14px;"></i>{{ continent.pays|length }}</span></div>
	</div>
  </a>
</ul>
</div>
{% endfor %}
</div>

<h5 class="breadcrumbs-title">{{ 'Liste des pays'|trans }} <a href="#!" class="open-modal-pays btn-floating btn-large waves-effect waves-light right bg-struct"><i class="mdi-content-add"></i></a></h5>
<hr>
<div class="row" style="margin-top: 20px;">
{% for pays in liste_pays %}
<div class="col s12 m4 12">
<div style="display:block;">
<ul id="dropdown-pays-{{ pays.id }}" class="dropdown-content right"style="min-width: 150px!important;">
	<li><a href="#!" class="-text open-modal-update-pays" value="{{ pays.id }}" class="-text"><i class="mdi-image-edit" style="font-size: 15px;"></i> {{ 'Modifier'|trans }}</a> </li>
	<li><a href="{{ path('users_adminuser_drop_country_user_local', {'id': pays.id }) }}" class="-text"><i class="mdi-content-clear" style="font-size: 15px;"></i> {{ 'Supprimer'|trans }}</a></li>
</ul>
<a class="dropdown-button waves-effect waves-light" href="#!" data-activates="dropdown-pays-{{ pays.id }}" style="float:right; margin-top: 15px;"><i class="mdi-hardware-keyboard-control"></i></a>
</div>
<ul class="collection" style="overflow: visible;">
  <a href="#!" class="collection-item" style="padding: 5px;">
	<div style="height: 150px;">
	<div style="color: rgba(0, 0, 0, 0.87); font-size: 18px;"><strong><i class="mdi-image-adjust" style="font-size: 16px;" title="Plus prioritaire"></i> {{ pays.nom|trans }}</strong></div>
	<div><img src="{% if pays.drapeau != null %}{{ asset(pays.drapeau.getwebpath) }}{% else %}{{ asset('templateopme/images/user-bg-simple.jpg') }}{% endif %}" alt="" style="width: 100%; height: 120px;"></div>
	</div>
	<div style="background: #f2f2f2; height: 50px; border-top: 5px solid #3565ae;">
	<div style="color: rgba(0, 0, 0, 0.87); margin-top: 10px;">{{ 'Citoyen'|trans }}: {{ pays.citoyen|trans }}, {{ 'Citoyenne'|trans }}: {{ pays.citoyenne|trans }}</div>
	<div style="display:block; bottom: 20px; position: absolute; right: -20px;"><span class="badge" title="{{ 'Nombre d\'utilisateurs'|trans }}"><i class="mdi-action-settings-input-component" style="font-size: 14px;"></i>{{ pays.users|length }}</span></div>
	</div>
  </a>
</ul>
</div>
{% endfor %}
</div>


<div class="row">
<div class="col s12 m12 32">
	{% if nombrepage > 0 %}
				
	{% if page > 1 and page <= nombrepage %}
	{% set pagepre = page - 1 %}
	{% else %}
		{% set pagepre = nombrepage %}
	{% endif %}

	{% if page < nombrepage %}
		{% set pagesuiv = page + 1 %}
	{% else %}
		{% set pagesuiv =  1 %}
	{% endif %}

	{% if nombrepage < 5 %}
		{% set debut = 1 %}
		{% set fin = nombrepage %}
	{% else %}
		{% if page > 2 and page < (nombrepage - 2) %}
			{% set debut = page - 2 %}
			{% if page + 2 >= nombrepage %}
				{% set fin = nombrepage %}
			{% else %}
				{% set fin = page + 2 %}
			{% endif %}
		{% else %}
			{% if page <= 2 %}
				{% if page == 1 %}
					{% set debut = 1 %}
					{% set fin = page + 3 %}
				{% else %}
					{% set debut = 1 %}
					{% set fin = page + 2 %}
				{% endif %}
			{% else %}
				{% set debut = page - 2 %}
				{% if page + 2 >= nombrepage %}
					{% set fin = nombrepage %}
				{% else %}
					{% set fin = page + 2 %}
				{% endif %}
			{% endif %}
		{% endif %}
		
	{% endif %}

	  <ul class="pagination"> 
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': 1 }) }}" title="Première page" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-fast-backward"></span></a></li>
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': pagepre }) }}" title="Page précedente" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-step-backward"></span></a></li>
		{% for p in debut..fin %}
		<li value="{{ p }}" class="{% if p == page %}active{% endif %}"><a href="{{ path('users_adminuser_form_pays_continent', {'page': p }) }}" style="margin: 4px 0px;">{{ p }}</a></li>
		{% endfor %}
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': pagesuiv }) }}"  title="Page suivante" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-step-forward"></span></a></li>
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': nombrepage }) }}" title="Dernière page" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-fast-forward"></span></a></li>
	  </ul>
	<div class="clearfix"></div>
	{% else %}
	  <ul class="pagination" style="margin-top: 15px;">
	  <li><a href="{{ path('users_adminuser_form_pays_continent', {'page': page }) }}" title="Première page" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-fast-backward"></span></a></li>
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': page }) }}" title="Page précedente" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-step-backward"></span></a></li>

		<li  class="active"><a href="{{ path('users_adminuser_form_pays_continent', {'page': page }) }}" style="margin: 4px 0px;">0</a></li>

		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': page }) }}"  title="Page suivante" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-step-forward"></span></a></li>
		<li><a href="{{ path('users_adminuser_form_pays_continent', {'page': page }) }}" title="Dernière page" style=" width: 34px; height: 34px; border-radius: 17px; padding: 3px; margin: 2px;"><span class="fa fa-fast-forward"></span></a></li>
	   </ul>
	<div class="clearfix"></div>
	{% endif %}	
</div>
</div>

</div>
</div>
</div>
</div>
</div>

<div class="modal fade" data-backdrop="false" id="modal2" style="padding-top: 100px; max-height: 900px;">
<div class="modal-dialog">
<div class="modal-content" style="padding: 0px; border-radius: 0px;">
<nav class="red" style="background: #3565ae!important;">
<h5 style="padding-top: 20px; padding-left: 4px;">
  <i class="mdi-action-receipt"></i> {{ 'Ajouter un continent'|trans }} <button type="button" class="close right" data-dismiss="modal"><i class="mdi-content-clear modal-action  modal-close"></i></button>
</h5>
</nav>
<div class="modal-body">
<div class="row" style="min-height: 450px!important;">

	{{ form_start(form, {'class': 'col s12', 'attr': path('users_adminuser_form_pays_continent') }}) }}
		<div class="input-field col s12">
		 {{ form_widget(form.nom) }}
		 {{ form_label(form.nom, 'Nom du continent'|trans) }}
		 <div style="color: red;">{{ form_errors(form.nom)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form.citoyen) }}
		 {{ form_label(form.citoyen, 'Nom des citoyens'|trans) }}
		 <div style="color: red;">{{ form_errors(form.citoyen)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form.citoyenne) }}
		 {{ form_label(form.citoyenne, 'Nom des citoyennes'|trans) }}
		 <div style="color: red;">{{ form_errors(form.citoyenne)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form.siteweb) }}
		 {{ form_label(form.siteweb, 'Ajouter un site web'|trans) }}
		 <div style="color: red;">{{ form_errors(form.siteweb)|trans }}</div>
	  </div>
	  <div class="file-field input-field col s12">
		  <input class="file-path validate" type="text" disabled style="padding-left: 40px;"/>
		  <div class="btn bg-struct" style="margin-left: 10px;">
			<span><i class="mdi-image-exposure"></i> {{ 'Image'|trans }}</span>
			{{ form_widget(form.file) }}
		  </div>
	  </div>
	  <div class="col s12" style="margin-top: 30px;">
		 <button class="btn waves-effect waves-light bg-struct" type="submit">{{ 'Envoyer'|trans }} <i class="mdi-content-send right"></i></button>
	  </div>
{{ form_end(form) }}

  </div>
</div>
<div class="modal-footer" style="padding-top: 15px; z-index: 1;">
	{% include 'Theme/General/Template/Menu/social.html.twig' %}
  </div>
</div>
</div>
</div>

<div class="modal fade" data-backdrop="false" id="modal3" style="padding-top: 60px;">
<div class="modal-dialog">
<div class="modal-content" style="padding: 0px; border-radius: 0px;">
<nav class="red" style="background: #3565ae!important;">
<h5 style="padding-top: 20px; padding-left: 4px;">
  <i class="mdi-image-camera"></i> {{ 'Ajouter un pays'|trans }} <button type="button" class="close right" data-dismiss="modal"><i class="mdi-content-clear modal-action  modal-close"></i></button>
</h5>
</nav>
<div class="modal-body">
<h4 class="header2">Ajouter un noueau pays</h4>
<div class="row" style="min-height: 700px!important;">
	{{ form_start(form2, {'class': 'col s12', 'attr': path('users_adminuser_adding_pays_localite_user') }}) }}
		<div class="input-field col s12">
		 {{ form_widget(form2.nom) }}
		 {{ form_label(form2.nom, 'Nom du pays'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.nom)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form2.citoyen) }}
		 {{ form_label(form2.citoyen, 'Nom des citoyens'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.citoyen)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form2.citoyenne) }}
		 {{ form_label(form2.citoyenne, 'Nom des citoyennes'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.citoyenne)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form2.code) }}
		 {{ form_label(form2.code, 'Code Téléphonique, ex: +237'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.code)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form2.domaine) }}
		 {{ form_label(form2.domaine, 'Extension domaine, ex: cm'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.domaine)|trans }}</div>
	  </div>
	  <div class="input-field col s12">
		 {{ form_widget(form2.continent) }}
		 {{ form_label(form2.continent, 'Nom du continent'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.continent)|trans }}</div>
	  </div>
	  
	  <div class="input-field col s12">
		 {{ form_widget(form2.siteweb) }}
		 {{ form_label(form2.siteweb, 'Site web'|trans) }}
		 <div style="color: red;">{{ form_errors(form2.siteweb)|trans }}</div>
	  </div>

	  <div class="file-field input-field col s12">
		  <input class="file-path validate" type="text" disabled style="padding-left: 40px;"/>
		  <div class="btn bg-struct" style="margin-left: 10px;">
			<span><i class="mdi-image-exposure"></i> {{ 'Drapeau'|trans }}</span>
			{{ form_widget(form2.drapeau) }}
		  </div>
	  </div>
	  
	  <div class="file-field input-field col s12">
		  <input class="file-path validate" type="text" disabled style="padding-left: 40px;"/>
		  <div class="btn bg-struct" style="margin-left: 10px;">
			<span><i class="mdi-image-exposure"></i> {{ 'Background'|trans }}</span>
			{{ form_widget(form2.file) }}
		  </div>
	  </div>
	  <div class="col s12" style="margin-top: 30px;">
		 <button class="btn waves-effect waves-light bg-struct" type="submit">{{ 'Envoyer'|trans }} <i class="mdi-content-send right"></i></button>
	  </div>
{{ form_end(form2) }}

  </div>
</div>
<div class="modal-footer" style="padding-top: 15px; z-index: 1;">
	{% include 'Theme/General/Template/Menu/social.html.twig' %}
  </div>
</div>
</div>
</div>

<div class="modal fade" data-backdrop="false" id="modal-update-content" style="padding-top: 60px;">
<div class="modal-dialog">
<div class="modal-content" style="padding: 0px; border-radius: 0px;">
<nav class="red" style="background: #3565ae!important;">
<h5 style="padding-top: 20px; padding-left: 4px;">
  <i class="mdi-image-camera"></i> {{ 'Mise à jour du contenu'|trans }} <button type="button" class="close right" data-dismiss="modal"><i class="mdi-content-clear modal-action  modal-close"></i></button>
</h5>
</nav>
<div class="modal-body">
<div class="row">
	   <div class="input-field col s12">
		<div class="wait-chargement-content-module-article" style="text-align: center;">
			Patientez un moment pendant le chargement de l'article</br>
			<img src="{{ asset('template/images/loader1.gif') }}" alt="image" style="height: 40px; width: 40px;">
		</div>

		<div class="content-module-loading-article" style="display: none;">
		
		</div>
	  </div>
  </div>
</div>
<div class="modal-footer" style="padding-top: 15px; z-index: 1;">
	{% include 'Theme/General/Template/Menu/social.html.twig' %}
  </div>
</div>
</div>
</div>

{% endblock %}


{% block srcjavascripttemplate %}

{% endblock %}

{% block javascripttemplate %}

$('.open-modal-update-continent').click(function(){
	var id = $(this).attr('value');
	$('.wait-chargement-content-module-article').show();
	$('.content-module-loading-article').hide();
	$('#modal-update-content').modal('show');
	$.get('{{ path('users_adminuser_update_content_continent12') }}',{ id: id }, function(data){
		$('.wait-chargement-content-module-article').hide();
		$('.content-module-loading-article').show();
		$('.content-module-loading-article').html(data);
	});
});	

$('.open-modal-update-pays').click(function(){
	var id = $(this).attr('value');
	$('.wait-chargement-content-module-article').show();
	$('.content-module-loading-article').hide();
	$('#modal-update-content').modal('show');
	$.get('{{ path('users_adminuser_modif_pays_localisation_user') }}',{ id: id }, function(data){
		$('.wait-chargement-content-module-article').hide();
		$('.content-module-loading-article').show();
		$('.content-module-loading-article').html(data);
	});
});	

$('.open-modal-continent').click(function(){
	$('#modal2').modal('show');
});
$('.open-modal-pays').click(function(){
	$('#modal3').modal('show');
});
{% endblock %}
